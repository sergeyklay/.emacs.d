* Building and Installing Emacs from the Repository

For detailed info see [[https://git.savannah.gnu.org/cgit/emacs.git/tree/INSTALL.REPO][official Emacs documentation]].

** Clone repo and prepare project

#+begin_src shell
  $ git clone git://git.sv.gnu.org/emacs.git emacs.git
  $ cd emacs.git
  $ git checkout emacs-29
  $ ./autogen.sh
#+end_src

** Configure Emacs

For details regarding your arch use ~gcc -march=native -Q --help=target~, for example:

#+begin_src shell
  $ gcc -march=native -Q --help=target | grep -E '\-march=\s+[a-z0-9]+$'
#+end_src

#+begin_src shell
  $ CFLAGS='-g -O2 -march=znver4 -pipe -fno-fast-math -ffp-contract=off' \
    ./configure \
      --disable-silent-rules \
      --enable-acl \
      --program-transform-name='s/^ctags$/ctags.emacs/' \
      --with-cairo \
      --with-dbus \
      --with-dumping=pdumper \
      --with-file-notification=inotify \
      --with-gif \
      --with-gnutls \
      --with-gpm \
      --with-harfbuzz \
      --with-imagemagick \
      --with-jpeg \
      --with-json \
      --with-lcms2 \
      --with-libgmp \
      --with-libotf \
      --with-libsystemd \
      --with-m17n-flt \
      --with-mailutils \
      --with-modules \
      --with-native-compilation=aot \
      --with-pdumper \
      --with-pgtk \
      --with-png \
      --with-rsvg \
      --with-sound \
      --with-sqlite3 \
      --with-threads \
      --with-tiff \
      --with-toolkit-scroll-bars \
      --with-tree-sitter \
      --with-webp \
      --with-x-toolkit=gtk3 \
      --with-xft \
      --with-xml2 \
      --with-xpm \
      --with-zlib \
      --without-compress-install \
      --without-gameuser \
      --without-gconf \
      --without-gsettings \
      --without-hesiod \
      --without-kerberos \
      --without-kerberos5 \
      --without-ns \
      --without-pop \
      --without-selinux \
      --without-x \
      --without-xaw3d \
      --without-xwidgets
#+end_src

** Compile Emacs

#+begin_src shell
  $ make -j $(getconf _NPROCESSORS_ONLN) bootstrap
#+end_src

** Start Emacs Server

#+begin_src shell
  $ systemctl enable --user emacs
  $ systemctl start --user emacs
#+end_src

** Set Emacs as the Default Editor in Debian Like Distros

#+begin_src shell
  $ sudo update-alternatives --install /usr/bin/editor editor /usr/local/bin/emacs 100
#+end_src

** Set =ctags.emacs= as the Default =ctags= in Debian Like Distros

#+begin_src shell
  $ sudo update-alternatives --install /usr/bin/ctags ctags /usr/local/bin/ctags.emacs 100
  $ sudo update-alternatives --set ctags /usr/local/bin/ctags.emacs
#+end_src
